#!kivy 1.5
#: import Animation kivy.animation.Animation

<MLightBox>:
    id: lb
    rt: self.parent.parent if self.parent else 0
    pos: (self.rt.center_x, self.rt.y) if self.rt else (0, 0)
    size: (self.rt.width, self.parent.height) if self.rt else (100, 100)
    name: 'moncul'
    color: 1, 1, 0

<LightStrip>:
    lb: lb
    st: st
    vb: vb
    bub: bub

    on_parent:
        root.remove_widget(root.bub)


#    on_visible:
#        root.st.width = 400

    StencilView:
        id: st
        center_x: root.center_x
        y: root.y
        height: root.height - root.vb.height - 10
        width: 200
        MLightBox:
            id: lb
#            pos: root.center_x, root.y
#            size: root.width, self.parent.height
#            name: 'moncul'
#            color: 1, 1, 0


    Bubble:
        id: bub
        size_hint: (None, None)
        size: root.width - 2, root.height - root.vb.height - 12
        pos_hint: {'x': 1, 'y': 1}
        arrow_pos: 'top_mid'
        orientation: 'horizontal'



    Toggle:
        id: vb
        main_color: 1, 0, 0
        size: 30, 30
        y: root.y + root.height - self.height
        center_x: root.center_x
        path: ''
        on_press:
            root.state_to_visible()
#            root.st.remove_widget(lb)
#            root.add_widget(root.bub)
#            root.bub.add_widget(lb)
#            root.bub.pos = 300,300
#            Animation(size=app._app_window.size if self.state == 'down' else (100, 100), d=1, t='in_out_quad').start(root.bub)
#            root.state_to_visible()


        

