#:kivy 1.4

<InnerBox>:


    canvas:
        Color:
            rgb: root.color
        Line:
            rectangle: root.x + 2, root.y + 2, root.width - 4 - 16, root.height - 4 - 16

        Color:
            hsv: root.i_color

        Rectangle:
            pos: root.x + 4, root.y + 4 
            size: root.width - 9 - 16, root.height - 9 - 16

    Widget:
        id: pointer

        x: root.x + root.x_value * self.width
        y: root.y + root.y_value * self.height
        width: root.width - 1 - 4 - 16
        height: root.height - 1 - 4 - 16



        canvas:
            Color:
                rgba: 1, 1, 1, 0.3
            Line:
                rectangle: root.x + 1, self.y + 1, self.width, 0
            Line:
                rectangle: self.x + 1, root.y + 1, 0, self.height
            Color:
                rgb: 1, 1, 1
            Rectangle:
                pos: self.x - 15, self.y - 15
                size: 32, 32
                source:  'atlas://data/images/defaulttheme/slider_cursor'

        Label:
            font_size: 10
            text: str(root.x_coef) + ', ' + str(root.y_coef)
            size: self.texture_size
            x: 10 #self.parent.x + 18 if self.parent.x < self.parent.width/2 - root.x else self.parent.x - 18 - self.width
            y: 10 #self.parent.y if self.parent.y < self.parent.height/2 - root.y else self.parent.y - self.height




<XyPad>:
    innerbox: innerbox
    x_name_w: x_name_w
    y_name_w: y_name_w
    y_name_s: y_name_s
    name_w: name_w

    InnerBox:
        id: innerbox
        color: root.color
        i_color: 4, 1, 0.2
        x: root.x + y_name_w.height + 5
        y: root.y + x_name_w.height + name_w.height + 10
        width: root.width - y_name_w.height - 5
        height: root.height - self.y

    Label:
        id: x_name_w
        font_size: 10
        text: root.x_name
        color: root.r, root.g, root.b, 1
        height: self.texture_size[1]
        width: root.innerbox.width
        center_x: root.innerbox.center_x
        y: root.y + name_w.height + 5

    Scatter:
        id: y_name_s

        rotation: 90

        canvas:
            Color:
                rgba: 1, .1, .1, 1

                Rectangle:
                    pos: 0, 0
                    size: self.size

        Label:
            id: y_name_w

            x: root.innerbox.y + 2
            y: self.parent.height - self.height
            width: root.innerbox.height - 4 - 15
            height: self.texture_size[1]

            color: root.r, root.g, root.b, 1
            font_size: 10
            valign: 'top'
            halign: 'center'
            text: root.y_name

    Label:
        id: name_w
        font_size: 15
        text: root.name
        halign: 'center'
        color: root.r, root.g, root.b, 1
        height: self.texture_size[1]
        width: root.width
        x: root.x

