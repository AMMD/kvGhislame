#!kivy 1.5
#: import Animation kivy.animation.Animation
#:import Bubble kivy.uix.bubble.Bubble

<MLightBox>:
    id: lb
    rt: self.parent.parent if self.parent else 0
    size_hint: (None, None)
    size: (self.rt.width, self.parent.height) if self.rt else (100, 100)
    pos: (self.parent.x, self.parent.y) if self.rt else (0, 0)
    name: 'moncul' # self.rt.name if self.rt else 'moncul'
    color: (1, 1, 0) #self.rt.color if self.rt else (1, 1, 0)

    on_parent:
        if self.parent: print "pos: " + str(self.parent.pos) + ", size: " + str(self.parent.size)
        if self.parent: print type(self.parent)
        print "size: " + str(self.size)
#        if((not isinstance(self.parent, Bubble)) & (self.parent != None)): self.pos = (self.rt.center_x, self.parent.y) # if((not isinstance(self.parent, Bubble)) & (self.parent != None))  else (0, 0)



<MultipleLightStrips>:
    lb: lb
    st: st
    st2: st2
#    vb: vb
    main_s: ms
    front_s: fs
#    sm: sm
#    bub: bub
#    fl: fl

#    on_parent:
#        root.remove_widget(root.bub)

    Screen:
        id: ms
        name: 'main'
        Push:
            main_color: 0, 1, 1
            text: 'D'
            size_hint: (None, None)
            pos: 0, root.height - self.height
            size: 100, 100
            on_press: 
                root.st.remove_widget(root.lb)
                root.st2.add_widget(root.lb)
                root.current = 'front'
        StencilView:
            id: st
            x: root.x
            y: root.y
            size_hint: (None, None)
            height: root.height - 100 # - root.vb.height - 10
            width: 90
            MLightBox:
                size_hint: (None, None)
                id: lb

    Screen:
        id: fs
        name: 'front'
        Push:
            main_color: 0, 1, 1
            size_hint: (None, None)
            pos: 0, root.height - self.height
            size: 100, 100
            text: 'E'
            on_press: 
                root.st2.remove_widget(root.lb)
                root.st.add_widget(root.lb)
                root.current = 'main'
        StencilView:
            id: st2
            x: root.x
            y: root.y
            size_hint: (None, None)
            height: root.height - 100 # - root.vb.height - 10
            width: root.width        

#    Bubble:
#        id: bub
#        size_hint: (None, None)
#        size: root.width, root.st.height
#        pos_hint: {'x': 1, 'y': 1}
#        arrow_pos: 'right_mid'
#        orientation: 'horizontal'
#        FloatLayout:
#            id: fl

        # Toggle:
        #     id: vb
        #     main_color: 1, 0, 0
        #     size: 30, 30
        #     y: root.y + root.height - self.height
        #     x: root.x
        #     path: ''
        #     on_press:
        #         root.state_to_visible()



        

