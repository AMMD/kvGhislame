#!kivy 1.5
#: import Animation kivy.animation.Animation
#:import Bubble kivy.uix.bubble.Bubble

<MLightBox>:
    id: lb
    rt: self.parent.parent if self.parent else 0
    size_hint: (None, None)
    size: (self.rt.width, self.parent.height) if self.rt else (100, 100)
    pos: (self.parent.x, self.parent.y) if self.rt else (0, 0)
#    name: 'moncul' # self.rt.name if self.rt else 'moncul'
#    color: (1, 1, 0) #self.rt.color if self.rt else (1, 1, 0)

    on_parent:
        if self.parent: print "pos: " + str(self.parent.pos) + ", size: " + str(self.parent.size)
        if self.parent: print type(self.parent)
        print "size: " + str(self.size)
#        if((not isinstance(self.parent, Bubble)) & (self.parent != None)): self.pos = (self.rt.center_x, self.parent.y) # if((not isinstance(self.parent, Bubble)) & (self.parent != None))  else (0, 0)



<MultipleLightStrips>:
    lb1: lb1
    st1: st1
    lb2: lb2
    st2: st2
    stf: stf
    main_s: ms
    front_s: fs


    Screen:
        id: ms
        name: 'main'
        Button:
            color: 0, 1, 1
            text: 'D'
            size_hint: (None, None)
            pos: 0, root.height - self.height
            size: 100, 100
            on_press: 
                root.st1.remove_widget(root.lb1)
                root.stf.add_widget(root.lb1)
                root.tmp_s = root.st1
                root.current = 'front'
        StencilView:
            id: st1
            x: root.x
            y: root.y
            size_hint: (None, None)
            height: root.height - 100 # - root.vb.height - 10
            width: 90
            MLightBox:
                size_hint: (None, None)
                id: lb1
                color: 1, 1, 0
                name: "Oh"

        Button:
            color: 0, 1, 1
            text: 'D'
            size_hint: (None, None)
            pos: 200, root.height - self.height
            size: 100, 100
            on_press: 
                root.st2.remove_widget(root.lb2)
                root.stf.add_widget(root.lb2)
                root.tmp_s = root.st2
                root.current = 'front'
        StencilView:
            id: st2
            x: root.x
            y: root.y
            size_hint: (None, None)
            height: root.height - 100 # - root.vb.height - 10
            width: 90
            pos: 200, 0
            MLightBox:
                size_hint: (None, None)
                id: lb2
                color: 1, 0, 0
                name: "Ah"

    Screen:
        id: fs
        name: 'front'
        Button:
            color: 0, 1, 1
            size_hint: (None, None)
            pos: 0, root.height - self.height
            size: 100, 100
            text: 'E'
            on_press: 
                root.restore_zoomed_widget()
#                root.stf.remove_widget(root.lb2)
#                root.tmp_s.add_widget(root.lb2)
                root.current = 'main'
        StencilView:
            id: stf
            x: root.x
            y: root.y
            size_hint: (None, None)
            height: root.height - 100 # - root.vb.height - 10
            width: root.width        




        

