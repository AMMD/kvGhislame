#!kivy 1.5
#: import Animation kivy.animation.Animation
#:import Bubble kivy.uix.bubble.Bubble

<MLightBox>:
#    id: lb1
    rt: self.parent.parent if self.parent else 0
    size_hint: (None, None)
    size: (self.rt.width, self.parent.height - 30) if self.rt else (100, 100)
    pos: (self.rt.x, self.rt.y) if self.rt else (0, 0)

<MultipleLightStrips>:

    lb1: lb1
    st1: st1
    lb2: lb2
    st2: st2
    lb3: lb3
    st3: st3
    stf: stf
    main_s: ms
    front_s: fs


    Screen:
        id: ms
        name: 'main'

        BoxLayout:
            orientation: 'horizontal'
            spacing: 20
            size_hint: (None, None)
            pos_hint: {'centerx': 0, 'y': 0}
            pos: root.pos
            size: root.size
            BoxLayout:
                orientation: 'vertical'
                canvas:
                    Line:
                        rectangle: self.x, self.y, self.width, self.height
                Button:
                    canvas:
                        Clear
#                        Color:
#                            rgb: root.lb1.color
                        Rectangle:
                            pos: self.pos
                            size: self.size
                        Color:
                            rgba: 1, 1, 1, 1
                        Rectangle:
                            pos: self.width / 2, self.y
                            size: 10, 10
                            source:  'atlas://data/images/defaulttheme/tree_closed'
                    size_hint: (None, None)
                    y: self.parent.height - self.height
                    size: self.width, 10
                    on_press: 
                        root.st1.remove_widget(root.lb1)
                        root.stf.add_widget(root.lb1)
                        root.tmp_s = root.st1
                        root.lb1.width = root.width
                        root.lb1.x = root.x
                        root.current = 'front'
                StencilView:
                    id: st1
                    size_hint: (None, None)
                    height: root.height - 15
                    width: 90
                    LightBox:
                        size_hint: (None, None)
                        id: lb1
                        color: 0, 1, 1
                        name: root.name1
                        size: root.width, self.parent.height

            BoxLayout:
                orientation: 'vertical'
                canvas:
                    Line:
                        rectangle: self.x, self.y, self.width, self.height
                Button:
                    color: 0, 1, 1
                    text: 'D'
                    size_hint: (None, None)
                    y: self.parent.height - self.height
                    size: 30, 30
                    on_press: 
                        root.st2.remove_widget(root.lb2)
                        root.stf.add_widget(root.lb2)
                        root.tmp_s = root.st2
                        root.lb2.width = root.width
                        root.lb2.x = root.lb2.parent.x
                        root.current = 'front'
                StencilView:
                    id: st2
                    size_hint: (None, None)
                    height: root.height - 30
                    width: 90
                    LightBox:
                        id: lb2
                        size_hint: (None, None)
                        color: 1, 0, 0
                        name: root.name2
                        size: root.width, self.parent.height
                        pos: self.parent.pos

            BoxLayout:
                orientation: 'vertical'
                canvas:
                    Line:
                        rectangle: self.x, self.y, self.width, self.height
                Button:
                    color: 0, 1, 1
                    text: 'D'
                    size_hint: (None, None)
                    y: self.parent.height - self.height
                    size: 30, 30
                    on_press: 
                        root.st3.remove_widget(root.lb3)
                        root.stf.add_widget(root.lb3)
                        root.tmp_s = root.st3
                        root.lb3.width = root.width
                        root.lb3.x = root.lb3.parent.x
                        root.current = 'front'
                StencilView:
                    id: st3
                    size_hint: (None, None)
                    height: root.height - 30
                    width: 90
                    LightBox:
                        id: lb3
                        size_hint: (None, None)
                        color: 1, 0, 0
                        name: root.name3
                        size: root.width, self.parent.height
                        pos: self.parent.pos

    Screen:
        id: fs
        name: 'front'
        Button:
            color: 0, 1, 1
            size_hint: (None, None)
            pos: 0, root.height - self.height
            size: 30, 30
            text: 'E'
            on_press: 
                root.restore_zoomed_widget()
                root.current = 'main'
        StencilView:
            id: stf
            x: root.x
            y: root.y
            size_hint: (None, None)
            height: root.height - 30 # - root.vb.height - 10
            width: root.width        




        

