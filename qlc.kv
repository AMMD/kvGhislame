#!kivy 1.5

<Qlc>:
    lightsm: lightsm
    front_s: front_s
    main_s: main_s
    barres: barres
    barres_st: barres_st
    stf: stf

    ScreenManager:
        id: lightsm
        size_hint: 1, 1

        Screen:
            id: main_s
            name: 'main'
            size_hint: 1, 1
            GridLayout:
                size_hint: 1, 1
                rows: 2
                spacing: 5
                BoxLayout:
                    orientation: 'vertical'
                    size_hint: 1, 1
                    Button:
                        canvas:
                            Clear
                            Rectangle:
                                pos: self.pos
                                size: self.size
                            Color:
                                rgba: 1, 1, 1, 1
                            Rectangle:
                                pos: self.width / 2, self.y
                                size: 10, 10
                                source:  'atlas://data/images/defaulttheme/tree_closed'
                        size_hint: (None, None)
                        y: self.parent.height - self.height
                        size: self.width, 10
                        on_press: 
                            root.zoom_strip(root.barres)
                    StencilView:
                        id: barres_st
                        size_hint: (None, 1)
                        width: 110
                        LightBox:
                            size_hint: (None, 1)
                            id: barres
                            color: 0, 1, 1
                            name: 'Barres'
                            size: root.width, self.parent.height
                            y: self.parent.y
                            args_pattern: "fff"
                            path: "/" + app.get_application_name().replace(" ", "_") + "/LightXYpad/" +  self.name.replace(" ", "_") + "/" + str(self.mode)
                            control_path: self.path
                BoxLayout:
                    orientation: 'vertical'
                    size_hint: 1, 1
                    Button:
                        canvas:
                            Clear
                            Rectangle:
                                pos: self.pos
                                size: self.size
                            Color:
                                rgba: 1, 1, 1, 1
                            Rectangle:
                                pos: self.width / 2, self.y
                                size: 10, 10
                                source:  'atlas://data/images/defaulttheme/tree_closed'
                        size_hint: (None, None)
                        y: self.parent.height - self.height
                        size: self.width, 10
                        on_press: 
                            root.zoom_strip(orl64)
                    StencilView:
                        id: orl64_st
                        size_hint: (None, 1)
                        width: 110
                        LightBox:
                            size_hint: (None, 1)
                            id: orl64
                            color: 0, 1, 1
                            name: 'PAR 64 ORL'
                            size: root.width, self.parent.height
                            x: self.parent.x
                            args_pattern: "fff"
                            path: "/" + app.get_application_name().replace(" ", "_") + "/LightXYpad/" +  self.name.replace(" ", "_") + "/" + str(self.mode)
                            control_path: self.path

           
#            BoxLayout:
#                size_hint: 1, 1
#                orientation: 'horizontal'


        Screen:
            id: front_s
            size_hint: 1, 1
            name: 'front'
            Button:
                color: 0, 1, 1
                size_hint: (None, None)
                pos: 0, root.height - self.height
                size: 30, 30
                text: 'E'
                on_press: 
                    root.restore_zoomed_strip()

            StencilView:
                id: stf
                x: root.x
                y: root.y
                size_hint: (None, None)
                height: root.height - 30 # - root.vb.height - 10
                width: root.width        
