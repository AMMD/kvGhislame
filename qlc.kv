#!kivy 1.5

<LightStrip>:
    button: button
    stencil: stencil
    lightbox: lightbox

    orientation: 'vertical'
    spacing: 5

    Button:
        id: button
        canvas:
            Clear
            Color:
                rgb: root.color
                a: 0.5
            Line:
                rectangle: self.x + 2, self.y + 1, self.width - 2, self.height - 2
            Rectangle:
                pos: self.x + self.width / 2, self.y + 7
                size: 10, 10
                source:  'atlas://data/images/defaulttheme/tree_closed'
        size_hint: (None, None)
        color: 1, 1, 1
        text: 'Zoom'
        y: self.parent.height - self.height
        size: self.width, 35

    StencilView:
        id: stencil
        size_hint: (None, 1)
        x: root.x
        width: 110
        LightBox:
            ls: self.parent.parent
            size_hint: (None, 1)
            id: lightbox
            color: root.color
            name: root.name
            mode: 'rgb'
            size: root.parent.width, self.parent.parent.height
            y: self.parent.y
            x: self.parent.x
            args_pattern: "fff"
            path: "/" + app.get_application_name().replace(" ", "_") + "/LightXYPad/" + str(self.mode)
            control_path: root.control_path if root.control_path else self.path
            target: "osc.udp://SCVideo:56414"
            on_touch_move: print "[Callback]" + self.path + ' ' + self.name

<Qlc>:
    lightsm: lightsm
    front_s: front_s
    main_s: main_s
    stf: stf

    barres: barres
    orl64: orl64
    souv64: souv64
    yula64: yula64
    orl36top: orl36top
    orl36bottom: orl36bottom
    lointains: lointains
    occuloques: occuloques
    yula36tub: yula36tub
    yula36ext: yula36ext
    yula36int: yula36int
    grada1: grada1
    grada2: grada2
    grada3: grada3
    grada4: grada4
    grada5: grada5
    grada6: grada6
    hold: hold
    fade: fade
    chase1: chase1
    chase2: chase2
    chase3: chase3
    chase4: chase4
    chase5: chase5
    chase6: chase6
    chase7: chase7
    chase8: chase8
    chase9: chase9
    chase10: chase10
    chase11: chase11
    chase12: chase12
    smoke: smoke
    barled_on: barled_on

    target: "osc.udp://SCVideo:56414"

    ScreenManager:
        id: lightsm
        size_hint: 1, 1

        Screen:
            id: main_s
            name: 'main'
            size_hint: 1, 1
            GridLayout:
                size_hint: 1, 1
                rows: 2
#                cols: 2
                spacing: 5

                LightStrip:
                    id: barres
                    size_hint: 1, 1
                    color: 1, 0, 0
                    name: 'Barres'
                    on_touch_down:
                        if self.button.collide_point(args[1].x, args[1].y): root.zoom_strip(self.lightbox)

                LightStrip:
                    id: orl64
                    size_hint: 1, 1
                    color: 1, 1, 0
                    name: '64 ORL'
                    on_touch_down:
                        if self.button.collide_point(args[1].x, args[1].y): root.zoom_strip(self.lightbox)

                LightStrip:
                    id: souv64
                    size_hint: 1, 1
                    color: 1, 0, 1
                    name: '64 Souv'
                    on_touch_down:
                        if self.button.collide_point(args[1].x, args[1].y): root.zoom_strip(self.lightbox)

                LightStrip:
                    id: yula64
                    size_hint: 1, 1
                    color: 0, 1, 1
                    name: '64 Yula'
                    on_touch_down:
                        if self.button.collide_point(args[1].x, args[1].y): root.zoom_strip(self.lightbox)
       
                LightStrip:
                    id: orl36top
                    size_hint: 1, 1
                    color: 1, 1, 0.2
                    name: '36 ORL Top'
                    on_touch_down:
                        if self.button.collide_point(args[1].x, args[1].y): root.zoom_strip(self.lightbox)

                LightStrip:
                    id: orl36bottom
                    size_hint: 1, 1
                    color: 1, 1, 0.2
                    name: '36 ORL Bottom'
                    on_touch_down:
                        if self.button.collide_point(args[1].x, args[1].y): root.zoom_strip(self.lightbox)
       
                LightStrip:
                    id: lointains
                    size_hint: 1, 1
                    color: 0, 0, 1
                    name: 'Lointains'
                    on_touch_down:
                        if self.button.collide_point(args[1].x, args[1].y): root.zoom_strip(self.lightbox)

                LightStrip:
                    id: occuloques
                    size_hint: 1, 1
                    color: 0, 1, 0
                    name: 'Occuloques'
                    on_touch_down:
                        if self.button.collide_point(args[1].x, args[1].y): root.zoom_strip(self.lightbox)

                LightStrip:
                    id: yula36tub
                    size_hint: 1, 1
                    color: 0.1, 1, 1
                    name: '36 Yula Tub'
                    on_touch_down:
                        if self.button.collide_point(args[1].x, args[1].y): root.zoom_strip(self.lightbox)
       
                LightStrip:
                    id: yula36ext
                    size_hint: 1, 1
                    color: 0.15, 1, 1
                    name: '36 Yula Ext'
                    on_touch_down:
                        if self.button.collide_point(args[1].x, args[1].y): root.zoom_strip(self.lightbox)

                LightStrip:
                    id: yula36int
                    size_hint: 1, 1
                    color: 0.2, 1, 1
                    name: '36 Yula Int'
                    on_touch_down:
                        if self.button.collide_point(args[1].x, args[1].y): root.zoom_strip(self.lightbox)
       
                LightFader:
                    id: grada1
                    orientation: 'vertical'
                    size_hint: 1, 1
                    color: 0, 1, 1
                    name: 'G1'
                    target: root.target

                LightFader:
                    id: grada2
                    orientation: 'vertical'
                    size_hint: 1, 1
                    color: 0, 1, 1
                    name: 'G2'
                    target: root.target


                LightFader:
                    id: grada3
                    orientation: 'vertical'
                    size_hint: 1, 1
                    color: 0, 1, 1
                    name: 'G3'
                    target: root.target

                LightFader:
                    id: grada4
                    orientation: 'vertical'
                    size_hint: 1, 1
                    color: 0, 1, 1
                    name: 'WOII'
                    target: root.target

                LightFader:
                    id: grada5
                    orientation: 'vertical'
                    size_hint: 1, 1
                    color: 0, 1, 1
                    name: 'Yula'
                    target: root.target

                LightFader:
                    id: grada6
                    orientation: 'vertical'
                    size_hint: 1, 1
                    color: 0, 1, 1
                    name: 'Souv'
                    target: root.target

                ValueFader:
                    id: hold
                    orientation: 'vertical'
                    size_hint: 1, 1
                    color: 1, 1, 1
                    name: 'Hold'
                    target: root.target

                ValueFader:
                    id: fade
                    orientation: 'vertical'
                    size_hint: 1, 1
                    path: '/dummy'
                    color: 1, 1, 1
                    name: 'Fade'
                    target: root.target

                GridLayout:
                    cols: 2
                    rows: 6
                    size_hint: 1, 1
                    Toggle:
                        id: chase1
                        main_color: 1, 0.5, 0.5
                        text: 'C1'
                        name: 'C1'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target
                    Toggle:
                        id: chase2
                        main_color: 1, 0.5, 0.5
                        text: 'C2'
                        name: 'C2'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target
                    Toggle:
                        id: chase3
                        main_color: 1, 0.5, 0.5
                        text: 'C3'
                        name: 'C3'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target
                    Toggle:
                        id: chase4
                        main_color: 1, 0.5, 0.5
                        text: 'C4'
                        name: 'C4'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target
                    Toggle:
                        id: chase5
                        main_color: 1, 0.5, 0.5
                        text: 'C5'
                        name: 'C5'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target
                    Toggle:
                        id: chase6
                        main_color: 1, 0.5, 0.5
                        text: 'C6'
                        name: 'C6'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target
                    Toggle:
                        id: chase7
                        main_color: 1, 0.5, 0.5
                        text: 'C7'
                        name: 'C7'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target
                    Toggle:
                        id: chase8
                        main_color: 1, 0.5, 0.5
                        text: 'C8'
                        name: 'C8'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target
                    Toggle:
                        id: chase9
                        main_color: 1, 0.5, 0.5
                        text: 'C9'
                        name: 'C9'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target
                    Toggle:
                        id: chase10
                        main_color: 1, 0.5, 0.5
                        text: 'C10'
                        name: 'C10'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target
                    Toggle:
                        id: chase11
                        main_color: 1, 0.5, 0.5
                        text: 'C11'
                        name: 'C11'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target
                    Toggle:
                        id: chase12
                        main_color: 1, 0.5, 0.5
                        text: 'C12'
                        name: 'C12'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target

                Toggle:
                    id: blackout
                    main_color: 1, 1, 1
                    text: 'Blackout'
                    name: 'Blackout'
                    size_hint: 1, 1
                    target: root.target

                GridLayout:
                    cols: 1
                    rows: 2
                    size_hint: 1, 1
                    Toggle:
                        id: barled_on
                        main_color: 0.5, 1, 0.5
                        text: 'Barres On'
                        name: 'Barres On'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target
                    Push:
                        id: smoke
                        main_color: 0.5, 0.5, 1
                        text: 'Smoke'
                        name: 'Smoke'
                        size_hint: 1, 1
                        # size: 34, 34
                        target: root.target
       


#                 BoxLayout:
#                     orientation: 'vertical'
#                     size_hint: 1, 1
#                     spacing: 5
#                     Button:
#                         canvas:
#                             Clear
#                             Rectangle:
#                                 pos: self.pos
#                                 size: self.size
#                             Color:
#                                 rgba: 1, 1, 1, 1
#                             Rectangle:
#                                 pos: self.width / 2, self.y
#                                 size: 10, 10
#                                 source:  'atlas://data/images/defaulttheme/tree_closed'
#                         size_hint: (None, None)
#                         y: self.parent.height - self.height
#                         size: self.width, 10
#                         on_press: 
#                             root.zoom_strip(orl64)
#                     StencilView:
# #                        id: orl64_st
#                         size_hint: (None, 1)
#                         width: 110
#                         LightBox:
#                             size_hint: (None, 1)
# #                            id: orl64
#                             color: 0, 1, 1
#                             name: 'PAR 64 ORL'
#                             size: root.width, self.parent.height
#                             x: self.parent.x
#                             args_pattern: "fff"
#                             path: "/" + app.get_application_name().replace(" ", "_") + "/LightXYpad/" +  self.name.replace(" ", "_") + "/" + str(self.mode)
#                             control_path: self.path

#                 BoxLayout:
#                     orientation: 'vertical'
#                     size_hint: 1, 1
#                     spacing: 5
#                     Button:
#                         canvas:
#                             Clear
#                             Rectangle:
#                                 pos: self.pos
#                                 size: self.size
#                             Color:
#                                 rgba: 1, 1, 1, 1
#                             Rectangle:
#                                 pos: self.width / 2, self.y
#                                 size: 10, 10
#                                 source:  'atlas://data/images/defaulttheme/tree_closed'
#                         size_hint: (None, None)
#                         y: self.parent.height - self.height
#                         size: self.width, 10
#                         on_press: 
#                             root.zoom_strip(orl64)
#                     StencilView:
# #                        id: orl64_st
#                         size_hint: (None, 1)
#                         width: 110
#                         LightBox:
#                             size_hint: (None, 1)
# #                            id: orl64
#                             color: 0, 1, 1
#                             name: 'PAR 64 ORL'
#                             size: root.width, self.parent.height
#                             x: self.parent.x
#                             args_pattern: "fff"
#                             path: "/" + app.get_application_name().replace(" ", "_") + "/LightXYpad/" +  self.name.replace(" ", "_") + "/" + str(self.mode)
#                             control_path: self.path

           


        Screen:
            id: front_s
            size_hint: 1, 1
            name: 'front'
            Button:
                canvas:
                    Clear
                    Color:
                        rgb: 0,0,1
                        a: 0.5
                    Line:
                        rectangle: self.x + 2, self.y + 1, self.width - 2, self.height - 2
                    Rectangle:
                        pos: self.x + self.width / 2, self.y + 7
                        size: 10, 10
                        source:  'atlas://data/images/defaulttheme/tree_closed'
                size_hint: (None, None)
                color: 1, 1, 1
                text: 'DeZoom'
                y: self.parent.height - self.height
                size: 35, 35                
                on_press: 
                    root.restore_zoomed_strip()

            StencilView:
                id: stf
                x: root.x
                y: root.y
                size_hint: (None, None)
                height: root.height - 50 # - root.vb.height - 10
                width: root.width        
